import json

import requests


# # 四轴
# data = {'diameter': 2, 'zPer': 10, 'stepOver': 0.1, 'toolNum': 1, 'spindleSpeed': 18000,
#         'feed': 3000, "plungeFeed": 3000, 'zDepth': -20, 'toolType': 'ball', 'materialDepth': 20}
#
# # data = {'diameter': 3, 'zPer': 2, 'stepOver': 1.5, 'toolNum': 1, 'spindleSpeed': 18000,
# #         'feed': 3000, "plungeFeed": 3000, 'zDepth': -20, 'toolType': 'endmill', 'materialDepth': 20}
#
# files = {'file': open("xq2.stl", 'rb')}
#
# b = requests.post("http://127.0.0.1:5000/api/rotationPath", files=files, data=data)
# print(b.text)

# # 三轴粗加工
#
# material = json.dumps([[[-40, 40], [40, 40], [40, -40], [-40, -40]], [80, 80, 10]])
#
# data = {'diameter': 6, 'zPer': 1, 'stepOver': 3, 'toolNum': 1, 'spindleSpeed': 18000,
#         'feed': 3000, "plungeFeed": 3000, 'zDepth': -10, 'toolType': 'endmill', 'materialDepth': -10, 'tabLength': 0, 'tabHigh': 0, 'tabNum': 0, 'tiltAngle': 90, 'margin': 0, 'spray': 1, 'cutMaterial': 1, 'material':material}
#
# files = {'file': open("../file/测试件312.stl", 'rb')}
#
# b = requests.post("http://127.0.0.1:5000/api/commonPath", files=files, data=data)
# print(b.json()['gcode'])
# aa = json.dumps(b.json()['modelPath'])

# data1 = {'diameter': 6, 'zPer': 1, 'stepOver': 3, 'toolNum': 1, 'spindleSpeed': 18000,
#         'feed': 3000, "plungeFeed": 3000, 'zDepth': -10, 'toolType': 'endmill', 'materialDepth': -10, 'tabLength': 0, 'tabHigh': 0, 'tabNum': 0, 'tiltAngle': 90, 'margin': 0, 'spray': 1, 'modelPath': aa}
#
# files1 = {'file': open("../file/测试件312.stl", 'rb')}
#
# b = requests.post("http://127.0.0.1:5000/api/commonPath", files=files1, data=data1)
# print(b.json())

# # 三轴精加工
# data = {'diameter': 6, 'toolNum': 1, 'spindleSpeed': 18000,
#         'feed': 3000, "plungeFeed": 3000, 'zDepth': -10, 'toolType': 'endmill', 'materialDepth': -10, 'tabLength': 0, 'tabHigh': 0, 'tabNum': 0, 'tiltAngle': 90, 'margin': 0, 'spray': 1}
#
# files = {'file': open("../file/测试件312.stl", 'rb')}
#
# b = requests.post("http://127.0.0.1:5000/api/finePath", files=files, data=data)
# aa = json.dumps(b.json()['modelPath'])
#
# data1 = {'diameter': 6, 'toolNum': 1, 'spindleSpeed': 18000,
#         'feed': 3000, "plungeFeed": 3000, 'zDepth': -10, 'toolType': 'endmill', 'materialDepth': -10, 'tabLength': 0, 'tabHigh': 0, 'tabNum': 0, 'tiltAngle': 90, 'margin': 0, 'spray': 1, 'modelPath': aa}
#
# files1 = {'file': open("../file/测试件312.stl", 'rb')}
#
# b = requests.post("http://127.0.0.1:5000/api/finePath", files=files1, data=data1)
# print(b.json())

# # 三轴曲面加工
# data = {'diameter': 6, 'zPer': 1, 'stepOver': 3, 'toolNum': 1, 'spindleSpeed': 18000,
#         'feed': 3000, "plungeFeed": 3000, 'zDepth': -10, 'toolType': 'endmill', 'materialDepth': -10, 'tabLength': 0, 'tabHigh': 0, 'tabNum': 0, 'tiltAngle': 90, 'margin': 0, 'spray': 1}
#
# files = {'file': open("../file/测试件312.stl", 'rb')}
#
# b = requests.post("http://127.0.0.1:5000/api/camberPath", files=files, data=data)
# aa = json.dumps(b.json()['modelPath'])
#
# data1 = {'diameter': 6, 'zPer': 1, 'stepOver': 3, 'toolNum': 1, 'spindleSpeed': 18000,
#         'feed': 3000, "plungeFeed": 3000, 'zDepth': -10, 'toolType': 'endmill', 'materialDepth': -10, 'tabLength': 0, 'tabHigh': 0, 'tabNum': 0, 'tiltAngle': 90, 'margin': 0, 'spray': 1, 'modelPath': aa}
#
# files1 = {'file': open("../file/测试件312.stl", 'rb')}
#
# b = requests.post("http://127.0.0.1:5000/api/camberPath", files=files1, data=data1)
# print(b.json())

# # 全面雕刻
# data = {'diameter': 6, 'zPer': 1, 'stepOver': 3, 'toolNum': 1, 'spindleSpeed': 18000,
#         'feed': 3000, "plungeFeed": 3000, 'zDepth': -10, 'toolType': 'endmill', 'materialDepth': -10, 'tabLength': 0, 'tabHigh': 0, 'tabNum': 0, 'tiltAngle': 90, 'margin': 0, 'spray': 1}
#
# files = {'file': open("../file/测试件312.stl", 'rb')}
#
# b = requests.post("http://127.0.0.1:5000/api/parallelPath", files=files, data=data)
# aa = json.dumps(b.json()['modelPath'])
#
# data1 = {'diameter': 6, 'zPer': 1, 'stepOver': 3, 'toolNum': 1, 'spindleSpeed': 18000,
#         'feed': 3000, "plungeFeed": 3000, 'zDepth': -10, 'toolType': 'endmill', 'materialDepth': -10, 'tabLength': 0, 'tabHigh': 0, 'tabNum': 0, 'tiltAngle': 90, 'margin': 0, 'spray': 1, 'modelPath': aa}
#
# files1 = {'file': open("../file/测试件312.stl", 'rb')}
#
# b = requests.post("http://127.0.0.1:5000/api/parallelPath", files=files1, data=data1)
# print(b.json())

# # 三轴沿边切
#
# path = [[[[[-22.510494232177734,-19.831228256225586],[-23.882789611816406,-18.15522575378418],[-25.130577087402344,-16.384571075439453],[-26.247337341308594,-14.528494834899902],[-27.227264404296875,-12.596673011779785],[-28.065235137939453,-10.599178314208984],[-28.75688934326172,-8.54642391204834],[-29.298614501953125,-6.449113368988037],[-29.68759536743164,-4.318179607391357],[-29.921798706054688,-2.1647326946258545],[-30,0],[-29.921798706054688,2.1647326946258545],[-29.68759536743164,4.318179607391357],[-29.298614501953125,6.449113368988037],[-28.75688934326172,8.54642391204834],[-28.065235137939453,10.599178314208984],[-27.227264404296875,12.596673011779785],[-26.247337341308594,14.528494834899902],[-25.130577087402344,16.384571075439453],[-23.882789611816406,18.15522575378418],[-22.510494232177734,19.831228256225586],[-21.020835876464844,21.403839111328125],[-19.421588897705078,22.8648624420166],[-17.721084594726562,24.206676483154297],[-15.92818832397461,25.42228889465332],[-14.052253723144531,26.505361557006836],[-12.10305404663086,27.450246810913086],[-10.090755462646484,28.25201988220215],[-8.025848388671875,28.9064998626709],[-5.919101715087891,29.410274505615234],[-3.7814903259277344,29.760717391967773],[-1.624166488647461,29.956003189086914],[0.5416240692138672,29.99510955810547],[2.704591751098633,29.877838134765625],[4.853460311889648,29.604795455932617],[6.977024078369141,29.17740821838379],[9.064212799072266,28.597902297973633],[11.104145050048828,27.869300842285156],[13.086185455322266,26.995403289794922],[15,25.980762481689453],[16.83561134338379,24.830669403076172],[18.583450317382812,23.551122665405273],[20.234403610229492,22.14879035949707],[21.779865264892578,20.630983352661133],[23.211774826049805,19.005617141723633],[24.52267074584961,17.281164169311523],[25.70571517944336,15.466615676879883],[26.754743576049805,13.571431159973145],[27.664283752441406,11.605491638183594],[28.429595947265625,9.579046249389648],[29.046688079833984,7.502659797668457],[29.512346267700195,5.387158393859863],[29.824138641357422,3.243570566177368],[29.98044204711914,1.0830724239349365],[29.980637626647948,1.0722416996955872],[29.980637626647948,-1.072241699695587],[29.98044204711914,-1.0830724239349365],[29.824138641357422,-3.243570566177368],[29.512346267700195,-5.387158393859863],[29.046688079833984,-7.502659797668457],[28.429595947265625,-9.579046249389648],[27.664283752441406,-11.605491638183594],[26.754743576049805,-13.571431159973145],[25.70571517944336,-15.466615676879883],[24.52267074584961,-17.281164169311523],[23.211774826049805,-19.005617141723633],[21.779865264892578,-20.630983352661133],[20.234403610229492,-22.14879035949707],[18.583450317382812,-23.551122665405273],[16.83561134338379,-24.830669403076172],[15,-25.980762481689453],[13.086185455322266,-26.995403289794922],[11.104145050048828,-27.869300842285156],[9.064212799072266,-28.597902297973633],[6.977024078369141,-29.17740821838379],[4.853460311889648,-29.604795455932617],[2.704591751098633,-29.877838134765625],[0.5416240692138672,-29.99510955810547],[-1.624166488647461,-29.956003189086914],[-3.7814903259277344,-29.760717391967773],[-5.919101715087891,-29.410274505615234],[-8.025848388671875,-28.9064998626709],[-10.090755462646484,-28.25201988220215],[-12.10305404663086,-27.450246810913086],[-14.052253723144531,-26.505361557006836],[-15.92818832397461,-25.42228889465332],[-17.721084594726562,-24.206676483154297],[-19.421588897705078,-22.8648624420166],[-21.020835876464844,-21.403839111328125],[-22.510494232177734,-19.831228256225586]],[[-28.75688934326172,-8.54642391204834,0],[-29.298614501953125,-6.449113368988037,0],[-29.68759536743164,-4.318179607391357,0],[-29.921798706054688,-2.1647326946258545,0],[-30,0,0],[-29.921798706054688,2.1647326946258545,0],[-29.68759536743164,4.318179607391357,0],[-29.298614501953125,6.449113368988037,0],[-28.75688934326172,8.54642391204834,0],[-28.065235137939453,10.599178314208984,0],[-27.227264404296875,12.596673011779785,0],[-26.247337341308594,14.528494834899902,0],[-25.130577087402344,16.384571075439453,0],[-23.882789611816406,18.15522575378418,0],[-22.510494232177734,19.831228256225586,0],[-21.020835876464844,21.403839111328125,0],[-19.421588897705078,22.8648624420166,0],[-17.721084594726562,24.206676483154297,0],[-15.92818832397461,25.42228889465332,0],[-14.052253723144531,26.505361557006836,0],[-12.10305404663086,27.450246810913086,0],[-10.090755462646484,28.25201988220215,0],[-8.025848388671875,28.9064998626709,0],[-5.919101715087891,29.410274505615234,0],[-3.7814903259277344,29.760717391967773,0],[-1.624166488647461,29.956003189086914,0],[0.5416240692138672,29.99510955810547,0],[2.704591751098633,29.877838134765625,0],[4.853460311889648,29.604795455932617,0],[6.977024078369141,29.17740821838379,0],[9.064212799072266,28.597902297973633,0],[11.104145050048828,27.869300842285156,0],[13.086185455322266,26.995403289794922,0],[15,25.980762481689453,0],[16.83561134338379,24.830669403076172,0],[18.583450317382812,23.551122665405273,0],[20.234403610229492,22.14879035949707,0],[21.779865264892578,20.630983352661133,0],[23.211774826049805,19.005617141723633,0],[24.52267074584961,17.281164169311523,0],[25.70571517944336,15.466615676879883,0],[26.754743576049805,13.571431159973145,0],[27.664283752441406,11.605491638183594,0],[28.429595947265625,9.579046249389648,0],[29.046688079833984,7.502659797668457,0],[29.512346267700195,5.387158393859863,0],[29.824138641357422,3.243570566177368,0],[29.98044204711914,1.0830724239349365,0],[30,1.1021821408568715e-14,0],[29.98044204711914,-1.0830724239349365,0],[29.824138641357422,-3.243570566177368,0],[29.512346267700195,-5.387158393859863,0],[29.046688079833984,-7.502659797668457,0],[28.429595947265625,-9.579046249389648,0],[27.664283752441406,-11.605491638183594,0],[26.754743576049805,-13.571431159973145,0],[25.70571517944336,-15.466615676879883,0],[24.52267074584961,-17.281164169311523,0],[23.211774826049805,-19.005617141723633,0],[21.779865264892578,-20.630983352661133,0],[20.234403610229492,-22.14879035949707,0],[18.583450317382812,-23.551122665405273,0],[16.83561134338379,-24.830669403076172,0],[15,-25.980762481689453,0],[13.086185455322266,-26.995403289794922,0],[11.104145050048828,-27.869300842285156,0],[9.064212799072266,-28.597902297973633,0],[6.977024078369141,-29.17740821838379,0],[4.853460311889648,-29.604795455932617,0],[2.704591751098633,-29.877838134765625,0],[0.5416240692138672,-29.99510955810547,0],[-1.624166488647461,-29.956003189086914,0],[-3.7814903259277344,-29.760717391967773,0],[-5.919101715087891,-29.410274505615234,0],[-8.025848388671875,-28.9064998626709,0],[-10.090755462646484,-28.25201988220215,0],[-12.10305404663086,-27.450246810913086,0],[-14.052253723144531,-26.505361557006836,0],[-15.92818832397461,-25.42228889465332,0],[-17.721084594726562,-24.206676483154297,0],[-19.421588897705078,-22.8648624420166,0],[-21.020835876464844,-21.403839111328125,0],[-22.510494232177734,-19.831228256225586,0],[-23.882789611816406,-18.15522575378418,0],[-25.130577087402344,-16.384571075439453,0],[-26.247337341308594,-14.528494834899902,0],[-27.227264404296875,-12.596673011779785,0],[-28.065235137939453,-10.599178314208984,0],[-28.75688934326172,-8.54642391204834,0]]],[-0.1,-10],0,[],2824.976549668756]]
#
# data = {'path': json.dumps(path), 'zPer': 6, 'Diameter': 6, 'zStart': 0, 'zEnd': -6,
#         'feed': 3000, "plungeFeed": 3000, 'toolNum': 1, 'spray': 1, "spindleSpeed": 18000}
#
# files = {'file': open("../file/测试件312.stl", 'rb')}
#
# b = requests.post("http://127.0.0.1:5000/api/edgePath", files=files, data=data)
# print(b.json()['gcode'])

# 三轴区域切

path = [[[[[-22.510494232177734,-19.831228256225586],[-23.882789611816406,-18.15522575378418],[-25.130577087402344,-16.384571075439453],[-26.247337341308594,-14.528494834899902],[-27.227264404296875,-12.596673011779785],[-28.065235137939453,-10.599178314208984],[-28.75688934326172,-8.54642391204834],[-29.298614501953125,-6.449113368988037],[-29.68759536743164,-4.318179607391357],[-29.921798706054688,-2.1647326946258545],[-30,0],[-29.921798706054688,2.1647326946258545],[-29.68759536743164,4.318179607391357],[-29.298614501953125,6.449113368988037],[-28.75688934326172,8.54642391204834],[-28.065235137939453,10.599178314208984],[-27.227264404296875,12.596673011779785],[-26.247337341308594,14.528494834899902],[-25.130577087402344,16.384571075439453],[-23.882789611816406,18.15522575378418],[-22.510494232177734,19.831228256225586],[-21.020835876464844,21.403839111328125],[-19.421588897705078,22.8648624420166],[-17.721084594726562,24.206676483154297],[-15.92818832397461,25.42228889465332],[-14.052253723144531,26.505361557006836],[-12.10305404663086,27.450246810913086],[-10.090755462646484,28.25201988220215],[-8.025848388671875,28.9064998626709],[-5.919101715087891,29.410274505615234],[-3.7814903259277344,29.760717391967773],[-1.624166488647461,29.956003189086914],[0.5416240692138672,29.99510955810547],[2.704591751098633,29.877838134765625],[4.853460311889648,29.604795455932617],[6.977024078369141,29.17740821838379],[9.064212799072266,28.597902297973633],[11.104145050048828,27.869300842285156],[13.086185455322266,26.995403289794922],[15,25.980762481689453],[16.83561134338379,24.830669403076172],[18.583450317382812,23.551122665405273],[20.234403610229492,22.14879035949707],[21.779865264892578,20.630983352661133],[23.211774826049805,19.005617141723633],[24.52267074584961,17.281164169311523],[25.70571517944336,15.466615676879883],[26.754743576049805,13.571431159973145],[27.664283752441406,11.605491638183594],[28.429595947265625,9.579046249389648],[29.046688079833984,7.502659797668457],[29.512346267700195,5.387158393859863],[29.824138641357422,3.243570566177368],[29.98044204711914,1.0830724239349365],[29.980637626647948,1.0722416996955872],[29.980637626647948,-1.072241699695587],[29.98044204711914,-1.0830724239349365],[29.824138641357422,-3.243570566177368],[29.512346267700195,-5.387158393859863],[29.046688079833984,-7.502659797668457],[28.429595947265625,-9.579046249389648],[27.664283752441406,-11.605491638183594],[26.754743576049805,-13.571431159973145],[25.70571517944336,-15.466615676879883],[24.52267074584961,-17.281164169311523],[23.211774826049805,-19.005617141723633],[21.779865264892578,-20.630983352661133],[20.234403610229492,-22.14879035949707],[18.583450317382812,-23.551122665405273],[16.83561134338379,-24.830669403076172],[15,-25.980762481689453],[13.086185455322266,-26.995403289794922],[11.104145050048828,-27.869300842285156],[9.064212799072266,-28.597902297973633],[6.977024078369141,-29.17740821838379],[4.853460311889648,-29.604795455932617],[2.704591751098633,-29.877838134765625],[0.5416240692138672,-29.99510955810547],[-1.624166488647461,-29.956003189086914],[-3.7814903259277344,-29.760717391967773],[-5.919101715087891,-29.410274505615234],[-8.025848388671875,-28.9064998626709],[-10.090755462646484,-28.25201988220215],[-12.10305404663086,-27.450246810913086],[-14.052253723144531,-26.505361557006836],[-15.92818832397461,-25.42228889465332],[-17.721084594726562,-24.206676483154297],[-19.421588897705078,-22.8648624420166],[-21.020835876464844,-21.403839111328125],[-22.510494232177734,-19.831228256225586]],[[-28.75688934326172,-8.54642391204834,0],[-29.298614501953125,-6.449113368988037,0],[-29.68759536743164,-4.318179607391357,0],[-29.921798706054688,-2.1647326946258545,0],[-30,0,0],[-29.921798706054688,2.1647326946258545,0],[-29.68759536743164,4.318179607391357,0],[-29.298614501953125,6.449113368988037,0],[-28.75688934326172,8.54642391204834,0],[-28.065235137939453,10.599178314208984,0],[-27.227264404296875,12.596673011779785,0],[-26.247337341308594,14.528494834899902,0],[-25.130577087402344,16.384571075439453,0],[-23.882789611816406,18.15522575378418,0],[-22.510494232177734,19.831228256225586,0],[-21.020835876464844,21.403839111328125,0],[-19.421588897705078,22.8648624420166,0],[-17.721084594726562,24.206676483154297,0],[-15.92818832397461,25.42228889465332,0],[-14.052253723144531,26.505361557006836,0],[-12.10305404663086,27.450246810913086,0],[-10.090755462646484,28.25201988220215,0],[-8.025848388671875,28.9064998626709,0],[-5.919101715087891,29.410274505615234,0],[-3.7814903259277344,29.760717391967773,0],[-1.624166488647461,29.956003189086914,0],[0.5416240692138672,29.99510955810547,0],[2.704591751098633,29.877838134765625,0],[4.853460311889648,29.604795455932617,0],[6.977024078369141,29.17740821838379,0],[9.064212799072266,28.597902297973633,0],[11.104145050048828,27.869300842285156,0],[13.086185455322266,26.995403289794922,0],[15,25.980762481689453,0],[16.83561134338379,24.830669403076172,0],[18.583450317382812,23.551122665405273,0],[20.234403610229492,22.14879035949707,0],[21.779865264892578,20.630983352661133,0],[23.211774826049805,19.005617141723633,0],[24.52267074584961,17.281164169311523,0],[25.70571517944336,15.466615676879883,0],[26.754743576049805,13.571431159973145,0],[27.664283752441406,11.605491638183594,0],[28.429595947265625,9.579046249389648,0],[29.046688079833984,7.502659797668457,0],[29.512346267700195,5.387158393859863,0],[29.824138641357422,3.243570566177368,0],[29.98044204711914,1.0830724239349365,0],[30,1.1021821408568715e-14,0],[29.98044204711914,-1.0830724239349365,0],[29.824138641357422,-3.243570566177368,0],[29.512346267700195,-5.387158393859863,0],[29.046688079833984,-7.502659797668457,0],[28.429595947265625,-9.579046249389648,0],[27.664283752441406,-11.605491638183594,0],[26.754743576049805,-13.571431159973145,0],[25.70571517944336,-15.466615676879883,0],[24.52267074584961,-17.281164169311523,0],[23.211774826049805,-19.005617141723633,0],[21.779865264892578,-20.630983352661133,0],[20.234403610229492,-22.14879035949707,0],[18.583450317382812,-23.551122665405273,0],[16.83561134338379,-24.830669403076172,0],[15,-25.980762481689453,0],[13.086185455322266,-26.995403289794922,0],[11.104145050048828,-27.869300842285156,0],[9.064212799072266,-28.597902297973633,0],[6.977024078369141,-29.17740821838379,0],[4.853460311889648,-29.604795455932617,0],[2.704591751098633,-29.877838134765625,0],[0.5416240692138672,-29.99510955810547,0],[-1.624166488647461,-29.956003189086914,0],[-3.7814903259277344,-29.760717391967773,0],[-5.919101715087891,-29.410274505615234,0],[-8.025848388671875,-28.9064998626709,0],[-10.090755462646484,-28.25201988220215,0],[-12.10305404663086,-27.450246810913086,0],[-14.052253723144531,-26.505361557006836,0],[-15.92818832397461,-25.42228889465332,0],[-17.721084594726562,-24.206676483154297,0],[-19.421588897705078,-22.8648624420166,0],[-21.020835876464844,-21.403839111328125,0],[-22.510494232177734,-19.831228256225586,0],[-23.882789611816406,-18.15522575378418,0],[-25.130577087402344,-16.384571075439453,0],[-26.247337341308594,-14.528494834899902,0],[-27.227264404296875,-12.596673011779785,0],[-28.065235137939453,-10.599178314208984,0],[-28.75688934326172,-8.54642391204834,0]]],[-0.1,-10],0,[],2824.976549668756]]

data = {'outPath': json.dumps(path), 'avoidPath': "[]", 'zPer': 1, 'diameter': 6, 'zStart': 0, 'zEnd': -6,
        'feed': 3000, "plungeFeed": 3000, 'toolNum': 1, 'spray': 1, "spindleSpeed": 18000, 'margin': 0, "stepOver": 3}


b = requests.post("http://127.0.0.1:5000/api/pocketPath", data=data)
print(b.json()['gcode'])

